## Project 5: Track and Field Scouting Tool

The goal of this project is to create scouting reports for track and field teams using Python automation. 
As a track and field athlete in community college, I was asked by the coach to work on organizing spreadsheets of possible future recruits. 
I was tasked with searching for athletes' results as well as the schools they went to. 
Looking back, this was a task that the coach would have done had I not offered my skills with excel. 
This project is an exercise in identifying a need and creating a program to facilitate a better user experience.

### **Database: Design and Creation**

1. When initially testing the viability of this tool, I wrote the data to a list and stored that list as a .csv file to review. This worked at a small scale to prove the concept, but it would not scale well.
2. To provide room for growth, I designed and created a SQLite3 database. Using a consistent table structure of 'id' as a primary key and avoiding redundant strings, the database took shape.
3. The most up to date schema for this database can be found [here](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/APDB%20Schema%2004202022.pdf). The code used to create and clear the database can be found [here](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/APDB.py).

### **Web Scraping: Collection, Pre-Processing, and Storage**

1. The first step of collection was to identify and extract the relevant data. This was done by inspecting the data source and charting as short a path as possible to the desired information.
2. Initially the roadblock was having to log in to access any of the relevant data. For this I turned to Selenium. Using key inputs I was able to enter the website and navigate to the desired webpages.
3. Next was the issue of extracting the data in a sorted manner. All of the pertinent information is tagged as anchor links with limited differentiation. To work around this, I passed on using *bs4* and elected to extract the whole page, parse it as a string using regex.
4. Through this method I was able to iterate through parsed segments of the extracted source data. Along the way creating and replacing variables to store using SQLite3.
5. Using variations on the regex parsing method, I was able to gather a considerable set of data using the following functions:
  
[codeGather](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/codeGather.py): This function takes state names as inputs and outputs the IDs required to visit all divisions, districts, and highschools from the given states via URL. 
  
[topGather](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/topGather.py): Here the IDs collected with *codeGather* and a gender ID is input. The function outputs entries to the Athlete and Result table for the top ten marks for the given location ID. The supporting functions within *topGather* can be found [here](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/topGatherSup.py).
  
[meetGather](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/meetGather.py): When looking at specific meets, this function can be used to gather the same information as *topgather* from a different displayed format. This was created to more accurately gather college level marks. Supporting functions can be found [here](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/meetGatherSup.py). A cleanup function was required to compensate for inconsistent loading of the meet results webpage.
  
[locationGather](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/locationGather.py): To be more functional as a tool, this functions gathers location and contact information for the schools/clubs. This would in theory allow the scouting coach easy contact when evaluating the report.
  
[fullResultGather](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/fullResultGather.py): For a more thorough exploration of past performance, this function was created to collect past marks for specific athletes. Currently it is set to collect the past marks (back to 2014) of the top 25 performing athletes in each athlete. This function collects the athlete's complete history, allowing for a comparative look at what events may have positive or negative correlations with performance.

### **Analysis**
1. Currently under way is an exploration of the *fullResultGather* data. Some questions that will be asked: What correlation is there between events for each given athlete? Ex. Which is more predictive of Long Jump performance, 100m results, 200m results, or neither? Do athletes out of specific states perform better within a given even area? Ex. Do distance runners in Oregon run faster that those in Nevada? If so, by how much and how consistent is that margin between genders?
2. Here are examples of [SQL queries](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/AP_SQLqueries.py) that I have been running on the dataset.
3. Exploring the correlation between any given event: 
- I explored a couple isolated cases (men's 100m(x) vs 200m(y)) by taking the average mark for each athlete in a given event, graphing each athlete as a single point, and calculating the correlation/adding a trend line. This was a promising approach so I wrote this [function](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/graphCorData.py) to organize the calculated correlation coefficients (r values) into a heat map. One thing to notice in this data processing function is the use of event type comparison to more accurately represent correlation. When comparing the 100m dash (lower time is better) with the long jump (higher distance is better) to be high performing in both would produce a negative correlation. This wouldn't be an issue in isolation but when compared to the negative correlation seen between the 100m dash and 3200m run, it would appear that both of these cases, they would have similar relationships which is not true. To navigate this, I created a simple loop checking event type, inversing the r-value when a track event (100m) was compared to a field event(long jump). 
- Checking the csv against multiple externally calculated values in excel, I wrote two graphing functions for the [men](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/graphMenCor.py) and [women](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/graphWomenCor.py). 
- These output graphs representing the [men's correlations](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/Men's%20Correlation%20Heatmap.png) and the [women's correlations](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/Women's%20Correlation%20Heatmap.png). 
- Pleased with these I wanted to get a closer look at each event comparison. To do this I created this [function](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/graphEventEvent.py) which compares one event to another. In addition to the overall correlation coefficient, I calculated the r-squared value and added the sample size of each comparison. To contribute more insight I faceted the trandling by each athlete's state. 
- These are some example of the graphs that were created, [W 800m vs. long jump](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/Female's%20800m%20vs.%20lj.png), [W 100m vs. 200m](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/Female's%20100m%20vs.%20200m.png), [M 400m vs. 800m](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/Male's%20400m%20vs.%20800m.png), and [M high jump vs. triple jump](https://github.com/JamesWheeler4/James_Portfolio/blob/main/Proj_5%20Track%20and%20Field%20Scouting/Male's%20hj%20vs.%20tj.png). Unlike the heatmap earlier, you will notice the r-values when comparing track events to field events are not inversed in these graphs.
- 

